try:
    from src.memory import MemorySystem
    print("‚úÖ –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –∑–Ω–∞–π–¥–µ–Ω–æ!")
except ImportError as e:
    print(f"‚ùå –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ: {e}")
    exit()

def test_memory():
    print("üöÄ –¢–µ—Å—Ç—É—î–º–æ –ø–∞–º'—è—Ç—å...")
    mem = MemorySystem(db_path="test_db")
    
    # 1. –î–æ–¥–∞—î–º–æ —Å–ø–æ–≥–∞–¥
    print("üì• –î–æ–¥–∞—î–º–æ —Å–ø–æ–≥–∞–¥: '–ú–µ–Ω–µ –∑–≤–∞—Ç–∏ –Ñ–≤–≥–µ–Ω'")
    mem.add("User: –ú–µ–Ω–µ –∑–≤–∞—Ç–∏ –Ñ–≤–≥–µ–Ω")
    
    # 2. –®—É–∫–∞—î–º–æ
    print("üîç –®—É–∫–∞—î–º–æ: '–Ø–∫ –º–µ–Ω–µ –∑–≤–∞—Ç–∏?'")
    results = mem.search("–Ø–∫ –º–µ–Ω–µ –∑–≤–∞—Ç–∏?", n_results=1)
    
    print(f"üìÑ –ó–Ω–∞–π–¥–µ–Ω–æ: {results}")
    
    if results and "–Ñ–≤–≥–µ–Ω" in results[0]:
        print("‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω–æ! –ü–∞–º'—è—Ç—å –ø—Ä–∞—Ü—é—î.")
    else:
        print("‚ùå –¢–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω–æ. –ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –Ω–µ —Ç–µ.")

    # –ß–∏—Å—Ç–∏–º–æ –∑–∞ —Å–æ–±–æ—é (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –∞–ª–µ –∫—Ä–∞—â–µ –∑–∞–ª–∏—à–∏—Ç–∏ –¥–ª—è –¥–µ–±–∞–≥—É)
    # import shutil
    # shutil.rmtree("test_db")

if __name__ == "__main__":
    test_memory()
