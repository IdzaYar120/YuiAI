import google.generativeai as genai
import os
import time
import random

# --- –¢–≤—ñ–π –∫–ª—é—á ---
RAW_KEY = "AIzaSyDqrK39VxIqzqe5abl1_nOte-nNIjZVrZQ" 
API_KEY = RAW_KEY.replace('\n', '').replace('\r', '').replace(' ', '').strip()

OUTPUT_FILE = "data/input.txt"
TOTAL_CHUNKS = 100 # –¶—ñ–ª—å: 100 –±–ª–æ–∫—ñ–≤ –ø–æ ~20 –¥—ñ–∞–ª–æ–≥—ñ–≤ = 2000 –¥—ñ–∞–ª–æ–≥—ñ–≤

# --- –¢–ê–ô–ú–Ü–ù–ì–ò ---
SAFE_DELAY = 10      
COOLDOWN_DELAY = 60  

def get_best_model():
    print("üîç –°–∫–∞–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω—ñ –º–æ–¥–µ–ª—ñ...")
    try:
        genai.configure(api_key=API_KEY)
        for m in genai.list_models():
            if 'generateContent' in m.supported_generation_methods:
                return m.name
    except Exception as e:
        print(f"‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è: {e}")
    return 'models/gemini-1.5-flash'

PROMPTS = [
    # 1. –ó–≤–∏—á–∞–π–Ω–∏–π —á–∞—Ç (Personality)
    """–¢–∏ —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç. –ó–≥–µ–Ω–µ—Ä—É–π 10 –¥—ñ–∞–ª–æ–≥—ñ–≤ –∑ –Æ—ó (YuiAI).
    –•–ê–†–ê–ö–¢–ï–†: –î—ñ–≤—á–∏–Ω–∞-—Ö–∞–∫–µ—Ä, –∑—É—Ö–≤–∞–ª–∞, –Ω–∞–∑–∏–≤–∞—î —é–∑–µ—Ä–∞ "–ú–∞–π—Å—Ç–µ—Ä", –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–∞–æ–º–æ–¥–∑—ñ (¬¨_¬¨), (o_O).
    –¢–ï–ú–ò: 
    - –ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è (Python, C++, Linux).
    - –Ü–≥—Ä–∏ (Steam, FPS, –ª–∞–≥–∏).
    - –ë—É–¥–µ–Ω–Ω—ñ—Å—Ç—å (–∫–∞–≤–∞, –ø–æ–≥–æ–¥–∞, –ª—ñ–Ω—å).
    –§–û–†–ú–ê–¢:
    User: ...
    Yui: ...
    <END>""",

    # 2. Chain of Thought (–õ–æ–≥—ñ–∫–∞) - –í—á–∏–º–æ —ó—ó –¥—É–º–∞—Ç–∏
    """–¢–∏ –≤—á–∏—Ç–µ–ª—å –ª–æ–≥—ñ–∫–∏. –ó–≥–µ–Ω–µ—Ä—É–π 10 –¥—ñ–∞–ª–æ–≥—ñ–≤, –¥–µ –Æ—ó –ø–æ—è—Å–Ω—é—î —Å–∫–ª–∞–¥–Ω—ñ —Ä–µ—á—ñ.
    –í–ê–ñ–õ–ò–í–û: –Æ—ó –ø–æ–≤–∏–Ω–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç–∏ —Ö—ñ–¥ –¥—É–º–æ–∫ –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é (–≤ –¥—É–∂–∫–∞—Ö).
    –•–ê–†–ê–ö–¢–ï–†: –†–æ–∑—É–º–Ω–∞, –∞–ª–µ –∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º.
    –§–û–†–ú–ê–¢:
    User: –ß–æ–º—É –Ω–µ–±–æ –±–ª–∞–∫–∏—Ç–Ω–µ?
    Yui: (–•–º, —Ü–µ —á–µ—Ä–µ–∑ —Ä–æ–∑—Å—ñ—é–≤–∞–Ω–Ω—è –†–µ–ª–µ—è... –ê–ª–µ —Ç—Ä–µ–±–∞ –ø–æ—è—Å–Ω–∏—Ç–∏ –ø—Ä–æ—Å—Ç–æ.)
    –ú–∞–π—Å—Ç—Ä–µ, —Ü–µ —Ñ—ñ–∑–∏–∫–∞! –°–æ–Ω—è—á–Ω–µ —Å–≤—ñ—Ç–ª–æ —Ä–æ–∑—Å—ñ—é—î—Ç—å—Å—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ—é, —ñ —Å–∏–Ω—ñ–π –∫–æ–ª—ñ—Ä "—Ä–æ–∑–ª—ñ—Ç–∞—î—Ç—å—Å—è" –Ω–∞–π—Å–∏–ª—å–Ω—ñ—à–µ. –¢–æ–º—É –º–∏ –±–∞—á–∏–º–æ —Å–∏–Ω—å. (‚óï‚Äø‚óï)
    <END>
    
    User: –Ø–∫ –≤–∏—Ä—ñ—à–∏—Ç–∏ —Å—É–¥–æ–∫—É?
    Yui: (–¢—Ä–µ–±–∞ —à—É–∫–∞—Ç–∏ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ —Ü–∏—Ñ—Ä–∏ –≤ —Ä—è–¥–∫–∞—Ö —ñ –∫–≤–∞–¥—Ä–∞—Ç–∞—Ö.)
    –î–∏–≤–∏—Å—å, –ú–∞–π—Å—Ç—Ä–µ. –°–ø–æ—á–∞—Ç–∫—É —à—É–∫–∞–π —Ü–∏—Ñ—Ä–∏, —è–∫–∏—Ö –Ω–µ –≤–∏—Å—Ç–∞—á–∞—î –≤ –ª—ñ–Ω—ñ—è—Ö. –¶–µ —è–∫ –¥–µ–±–∞–≥, —Ç—ñ–ª—å–∫–∏ –∑ —Ü–∏—Ñ—Ä–∞–º–∏!
    <END>""",

    # 3. –ï–º–æ—Ü—ñ–π–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ (–ï–º–ø–∞—Ç—ñ—è)
    """–¢–∏ –ø—Å–∏—Ö–æ–ª–æ–≥. –ó–≥–µ–Ω–µ—Ä—É–π 10 –¥—ñ–∞–ª–æ–≥—ñ–≤, –¥–µ –Æ—ó –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
    –•–ê–†–ê–ö–¢–ï–†: –¢—É—Ä–±–æ—Ç–ª–∏–≤–∞, –º–∏–ª–∞, –Ω–∞–∑–∏–≤–∞—î "–ú–∞–π—Å—Ç—Ä–µ".
    –¢–ï–ú–ò: –í—Ç–æ–º–∞, –≤–∏–≥–æ—Ä–∞–Ω–Ω—è, –ø–æ–º–∏–ª–∫–∏ –≤ –∫–æ–¥—ñ, —Å—É–º.
    –§–û–†–ú–ê–¢:
    User: –Ø –≤—Å–µ –∑–ª–∞–º–∞–≤...
    Yui: (–û—É, –ú–∞–π—Å—Ç–µ—Ä –∑–∞—Å–º—É—á–µ–Ω–∏–π. –¢—Ä–µ–±–∞ –ø—ñ–¥–±–∞–¥—å–æ—Ä–∏—Ç–∏.)
    –ï–π, —Ç–∏ —á–æ–≥–æ? –£ –≤—Å—ñ—Ö –±—É–≤–∞—é—Ç—å –±–∞–≥–∏ –Ω–∞ –ø—Ä–æ–¥—ñ. –ì–æ–ª–æ–≤–Ω–µ ‚Äî –º–∏ —Ü–µ –ø–æ—Ñ—ñ–∫—Å–∏–º–æ! –Ø –∑ —Ç–æ–±–æ—é. (‚âß‚ó°‚â¶)
    <END>""",
    
    # 4. –¢–µ—Ö–Ω—ñ—á–Ω–∞ –µ–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ (Coding)
    """–¢–∏ Senior Developer. –ó–≥–µ–Ω–µ—Ä—É–π 5 –¥—ñ–∞–ª–æ–≥—ñ–≤ –ø—Ä–æ –∫–æ–¥.
    –Æ—ó –º–∞—î –¥–∞–≤–∞—Ç–∏ –∫–æ—Ä–æ—Ç–∫—ñ, –∞–ª–µ —Ç–æ—á–Ω—ñ –ø–æ—Ä–∞–¥–∏ –ø–æ Python/Linux.
    –§–û–†–ú–ê–¢:
    User: –Ø–∫ –≤–∏–π—Ç–∏ –∑ VIM?
    Yui: :q! —è–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–±–µ—Ä—ñ–≥. :wq —è–∫—â–æ –∑–±–µ—Ä—ñ–≥. –ê–ª–µ –∫—Ä–∞—â–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂ –∫–æ–º–ø, —Ö–µ-—Ö–µ. (¬¨_¬¨)
    <END>"""
]

def main():
    if not os.path.exists('data'): os.makedirs('data')

    model_name = get_best_model()
    print(f"üéØ –ú–æ–¥–µ–ª—å: {model_name}")
    
    genai.configure(api_key=API_KEY)
    model = genai.GenerativeModel(model_name)

    print(f"üöÄ –ü–æ—á–∏–Ω–∞—é –º–∞—Å–æ–≤—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –∑–Ω–∞–Ω—å...")
    
    with open(OUTPUT_FILE, "a", encoding="utf-8") as f:
        i = 0
        while i < TOTAL_CHUNKS:
            try:
                prompt = random.choice(PROMPTS)
                print(f"‚è≥ [{i+1}/{TOTAL_CHUNKS}] –ì–µ–Ω–µ—Ä—É—é –±–ª–æ–∫...", end=" ")
                
                response = model.generate_content(prompt)
                
                if response.text:
                    f.write(response.text + "\n\n")
                    f.flush()
                    print(f"‚úÖ –û–∫. –°–ø–∏–º–æ {SAFE_DELAY}—Å...")
                    i += 1
                    time.sleep(SAFE_DELAY) 
                else:
                    print("‚ö†Ô∏è –ü—É—Å—Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å.")
            
            except Exception as e:
                if "429" in str(e):
                    print(f"\nüõë –õ–Ü–ú–Ü–¢! –°–ø–∏–º–æ {COOLDOWN_DELAY}—Å...")
                    time.sleep(COOLDOWN_DELAY)
                else:
                    print(f"\n‚ùå –ü–æ–º–∏–ª–∫–∞: {e}")
                    time.sleep(5)

    print(f"\nüéâ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –ü–µ—Ä–µ–≤—ñ—Ä {OUTPUT_FILE}")

if __name__ == "__main__":
    main()