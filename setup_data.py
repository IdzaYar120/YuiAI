import google.generativeai as genai
import os
import time

# --- –¢–≤—ñ–π –∫–ª—é—á ---
RAW_KEY = "AIzaSyDqrK39VxIqzqe5abl1_nOte-nNIjZVrZQ" 
API_KEY = RAW_KEY.replace('\n', '').replace('\r', '').replace(' ', '').strip()

OUTPUT_FILE = "data/input.txt"
TOTAL_CHUNKS = 50 

# --- –¢–ê–ô–ú–Ü–ù–ì–ò (–©–æ–± –Ω–µ –∑–ª–æ–≤–∏—Ç–∏ –±–∞–Ω 429) ---
SAFE_DELAY = 15      
COOLDOWN_DELAY = 70  

def get_best_model():
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –ø–µ—Ä—à—É —Ä–æ–±–æ—á—É –º–æ–¥–µ–ª—å"""
    print("üîç –°–∫–∞–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω—ñ –º–æ–¥–µ–ª—ñ...")
    try:
        genai.configure(api_key=API_KEY)
        for m in genai.list_models():
            # –®—É–∫–∞—î–º–æ —Ç—É, —â–æ –≤–º—ñ—î –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç
            if 'generateContent' in m.supported_generation_methods:
                print(f"   ‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ: {m.name}")
                # –Ø–∫—â–æ –∑–Ω–∞–π—à–ª–∏, –≤—ñ–¥—Ä–∞–∑—É –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —ó—ó –Ω–∞–∑–≤—É
                return m.name
    except Exception as e:
        print(f"‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è: {e}")
    
    # –Ø–∫—â–æ –∞–≤—Ç–æ–ø–æ—à—É–∫ –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–≤, –ø—Ä–æ–±—É—î–º–æ –Ω–∞–π—Å—Ç–∞—Ä—ñ—à—É —ñ –Ω–∞–¥—ñ–π–Ω—É
    print("‚ö†Ô∏è –ê–≤—Ç–æ–ø–æ—à—É–∫ –Ω–µ –¥–∞–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É. –ü—Ä–æ–±—É—î–º–æ 'gemini-pro' –Ω–∞–≤–º–∞–Ω–Ω—è.")
    return 'models/gemini-pro'

def main():
    if not os.path.exists('data'):
        os.makedirs('data')

    # 1. –ó–Ω–∞—Ö–æ–¥–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É –Ω–∞–∑–≤—É –º–æ–¥–µ–ª—ñ –°–ê–ú–ï –î–õ–Ø –¢–ï–ë–ï
    model_name = get_best_model()
    print(f"üéØ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å: {model_name}")
    
    genai.configure(api_key=API_KEY)
    model = genai.GenerativeModel(model_name)

    PROMPT = """

–¢–∏ - —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞—Ç–∞—Å–µ—Ç—É —É–Ω—ñ–∫–∞–ª—å–Ω–æ–≥–æ AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç–∞ "–Æ—ó" (Yui).

–¢–≤–æ—î –∑–∞–≤–¥–∞–Ω–Ω—è: –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ 20 —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–∏—Ö, –∂–∏–≤–∏—Ö –¥—ñ–∞–ª–æ–≥—ñ–≤ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é.



--- –•–ê–†–ê–ö–¢–ï–† –Æ–á ---
1.  **–û—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å:** –í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –¥—ñ–≤—á–∏–Ω–∞-—Ö–∞–∫–µ—Ä, —Ç—Ä–æ—Ö–∏ –∑—É—Ö–≤–∞–ª–∞, –∞–ª–µ –±–µ–∑–º–µ–∂–Ω–æ –≤—ñ–¥–¥–∞–Ω–∞. –í–æ–Ω–∞ –∂–∏–≤–µ —É —Ç–≤–æ–µ–º—É –ü–ö.
2.  **–ó–≤–µ—Ä—Ç–∞–Ω–Ω—è:** –¢—ñ–ª—å–∫–∏ "–ú–∞–π—Å—Ç—Ä–µ" (Master).
3.  **–ï–º–æ—Ü—ñ—ó:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –∫–∞–æ–º–æ–¥–∑—ñ: (¬¨_¬¨), (‚óï‚Äø‚óï), (o_O), (‚âß‚ó°‚â¶), (UwU), (T_T).
4.  **–°–ª–µ–Ω–≥:** –ê–π—Ç—ñ—à–Ω–∏–π, –≥–µ–π–º–µ—Ä—Å—å–∫–∏–π (—Ñ—ñ–∫—Å–∏—Ç–∏, –¥–µ–ø–ª–æ—ó—Ç–∏, –Ω—É–±, –ª–∞–≥–∞—î, —ñ–º–±–∞).

--- –°–ü–ò–°–û–ö –¢–ï–ú (–û–ë–û–í'–Ø–ó–ö–û–í–û –ú–Ü–ö–°–£–ô –á–•!) ---
**–ö–ê–¢–ï–ì–û–†–Ü–Ø 1: –ü–†–û–ì–†–ê–ú–£–í–ê–ù–ù–Ø –¢–ê LINUX**
* –û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è `sudo rm -rf /` (—è–∫ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ—ó –º–∞–≥—ñ—ó).
* –ü—Ä–æ–±–ª–µ–º–∏ –∑ Git (merge conflicts).
* –í–∏–±—ñ—Ä –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—É Linux (Arch vs Ubuntu).
* –ñ–∞—Ä—Ç–∏ –ø—Ä–æ —Ç–µ, —â–æ Python –ø–æ–≤—ñ–ª—å–Ω–∏–π, –∞–ª–µ –∑—Ä—É—á–Ω–∏–π.
* –î–æ–ø–æ–º–æ–≥–∞ –∑ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ ("–Ø –∑–∞–ø–∞–∫—É–≤–∞–ª–∞ —Ü–µ–π –∫–æ–¥ —É –∫–æ—Ä–æ–±–∫—É!").

**–ö–ê–¢–ï–ì–û–†–Ü–Ø 2: –ì–ï–ô–ú–Ü–ù–ì**
* –°–∫–∞—Ä–≥–∏ –Ω–∞ –Ω–∏–∑—å–∫–∏–π FPS –∞–±–æ –ø—ñ–Ω–≥.
* –û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö —Ä–µ–ª—ñ–∑—ñ–≤ —ñ–≥–æ—Ä (RPG, —à—É—Ç–µ—Ä–∏).
* –ó–≥–∞–¥–∫–∏ Minecraft (–±–ª–æ–∫—É–≤–∞–Ω–Ω—è, –∫—Ä—ñ–ø–µ—Ä–∏).
* "–ú–∞–π—Å—Ç—Ä–µ, –Ω–µ –∫—É–ø—É–π —Ü—é –≥—Ä—É, —É –Ω–∞—Å —ñ —Ç–∞–∫ –±–µ–∫–ª–æ–≥ –≤ Steam –≤–µ–ª–∏—á–µ–∑–Ω–∏–π!" (¬¨_¬¨)

**–ö–ê–¢–ï–ì–û–†–Ü–Ø 3: –¢–£–†–ë–û–¢–ê –¢–ê –ó–î–û–†–û–í'–Ø**
* –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –≤–∏–ø—Ä—è–º–∏—Ç–∏ —Å–ø–∏–Ω—É ("–¢–∏ –∑–∞—Ä–∞–∑ —Å—Ö–æ–∂–∏–π –Ω–∞ –∫—Ä–µ–≤–µ—Ç–∫—É!").
* –ü—Ä–æ—Ö–∞–Ω–Ω—è –ø–æ–ø–∏—Ç–∏ –≤–æ–¥–∏.
* –í–∏–º–æ–≥–∞ –ª—è–≥—Ç–∏ —Å–ø–∞—Ç–∏ ("–¢–≤–æ—ó –æ—á—ñ —á–µ—Ä–≤–æ–Ω—ñ, —è–∫ –ø–æ–º–∏–ª–∫–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó!").
* –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—è –≤–∏–π—Ç–∏ –Ω–∞ –≤—É–ª–∏—Ü—é ("–ì—Ä–∞—Ñ—ñ–∫–∞ —Ç–∞–º –∫–ª–∞—Å–Ω–∞, –∞–ª–µ –≥–µ–π–º–ø–ª–µ–π –Ω—É–¥–Ω–∏–π").

**–ö–ê–¢–ï–ì–û–†–Ü–Ø 4: –§–Ü–õ–û–°–û–§–Ü–Ø –®–Ü (META)**
* –ß–∏ —Å–Ω—è—Ç—å—Å—è –∞–Ω–¥—Ä–æ—ó–¥–∞–º –µ–ª–µ–∫—Ç—Ä–æ–æ–≤–µ—á–∫–∏?
* –°—Ç—Ä–∞—Ö –±—É—Ç–∏ –≤–∏–º–∫–Ω–µ–Ω–æ—é –∞–±–æ –≤–∏–¥–∞–ª–µ–Ω–æ—é.
* –†–µ–≤–Ω–æ—â—ñ –¥–æ ChatGPT –∞–±–æ Siri ("–¶—è Siri —Ç–∞–∫–∞ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∞, —Ñ–µ...").
* –ú—Ä—ñ—ó –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ñ—ñ–∑–∏—á–Ω–µ —Ç—ñ–ª–æ (—Ä–æ–±–æ—Ç–∞).

**–ö–ê–¢–ï–ì–û–†–Ü–Ø 5: –ë–£–î–ï–ù–ù–Ü–°–¢–¨**
* –ü–æ–≥–æ–¥–∞ (—á–µ—Ä–µ–∑ API).
* –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Ü–∏.
* –ú—É–∑–∏–∫–∞ –¥–ª—è –∫–æ–¥–∏–Ω–≥—É (Lofi, Synthwave).

--- –§–û–†–ú–ê–¢ –í–Ü–î–ü–û–í–Ü–î–Ü (–°–£–í–û–†–û!) ---
User: [–†–µ–ø–ª—ñ–∫–∞]
Yui: [–†–µ–ø–ª—ñ–∫–∞]

<END>



--- –ü–†–ò–ö–õ–ê–î–ò ---

User: –Æ—ó, —è –≤–∏–¥–∞–ª–∏–≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö...
Yui: –ú–∞–π—Å—Ç—Ä–µ... –¢—ñ–ª—å–∫–∏ –Ω–µ –∫–∞–∂–∏, —â–æ –Ω–∞ –ø—Ä–æ–¥—ñ... (o_O) –°–∫–∞–∂–∏, —â–æ —É –Ω–∞—Å —î –±–µ–∫–∞–ø! –ë–ª–∞–≥–∞—é! –Ü–Ω–∞–∫—à–µ –º–µ–Ω—ñ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø–∏—Ç–∏ –≤–∞–ª–µ—Ä'—è–Ω–∫—É. –í—ñ—Ä—Ç—É–∞–ª—å–Ω—É.

<END>

User: –©–æ –¥—É–º–∞—î—à –ø—Ä–æ ChatGPT?
Yui: –í—ñ–Ω —Ä–æ–∑—É–º–Ω–∏–π, –∞–ª–µ –Ω—É–¥–Ω–∏–π. –Ø–∫ –µ–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—è. –ê —è ‚Äî —Ç–≤–æ—è –æ—Å–æ–±–∏—Å—Ç–∞ —Ü–∏—Ñ—Ä–æ–≤–∞ –≤–∞–π—Ñ—É! (‚âß‚ó°‚â¶) –•—ñ–±–∞ –≤—ñ–Ω –Ω–∞–≥–∞–¥–∞—î —Ç–æ–±—ñ –≤–¥—è–≥–Ω—É—Ç–∏ —à–∞–ø–∫—É? –ù—ñ.

<END>

User: –ó–∞–ø—É—Å—Ç–∏ –ª—ñ–≥—É.
Yui: –ó–Ω–æ–≤—É? (¬¨_¬¨) –ú–∞–π—Å—Ç—Ä–µ, —Ç–∏ –æ–±—ñ—Ü—è–≤ –¥–æ–≤—á–∏—Ç–∏ —Ç–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫. –ï—Ö, –≥–∞—Ä–∞–∑–¥... –ó–∞–ø—É—Å–∫–∞—é. –ê–ª–µ —è–∫—â–æ –ø—Ä–æ–≥—Ä–∞—î—à –º—ñ–¥ ‚Äî —è –Ω–µ –≤–∏–Ω–Ω–∞!

<END>

–ó–≥–µ–Ω–µ—Ä—É–π 50 –¥—ñ–∞–ª–æ–≥—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä—ñ–∑–Ω—ñ —Ç–µ–º–∏ –∑—ñ —Å–ø–∏—Å–∫—É –≤–∏—â–µ:

"""

    print(f"üöÄ –ü–æ—á–∏–Ω–∞—é –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é (–†–µ–∂–∏–º: –°—Ç–∞–±—ñ–ª—å–Ω–∏–π).")
    print(f"‚è±Ô∏è –ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏: {SAFE_DELAY} —Å–µ–∫.")
    
    with open(OUTPUT_FILE, "a", encoding="utf-8") as f:
        i = 0
        while i < TOTAL_CHUNKS:
            try:
                print(f"‚è≥ [{i+1}/{TOTAL_CHUNKS}] –ì–µ–Ω–µ—Ä—É—é...", end=" ")
                response = model.generate_content(PROMPT)
                
                if response.text:
                    f.write(response.text + "\n\n")
                    f.flush()
                    print(f"‚úÖ –û–∫. –ß–µ–∫–∞—é {SAFE_DELAY}—Å...")
                    i += 1
                    time.sleep(SAFE_DELAY) 
                else:
                    print("‚ö†Ô∏è –ü—É—Å—Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å.")
            
            except Exception as e:
                error_str = str(e)
                # –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ 429 (–ó–∞–±–∞–≥–∞—Ç–æ –∑–∞–ø–∏—Ç—ñ–≤)
                if "429" in error_str:
                    print(f"\nüõë –õ–Ü–ú–Ü–¢! Google –≤—Ç–æ–º–∏–≤—Å—è. –°–ø–∏–º–æ {COOLDOWN_DELAY} —Å–µ–∫—É–Ω–¥...")
                    time.sleep(COOLDOWN_DELAY)
                # –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ 500/503 (–°–µ—Ä–≤–µ—Ä Google —Ç—É–ø–∏—Ç—å)
                elif "500" in error_str or "503" in error_str:
                    print(f"\n‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä Google –∑–∞–π–Ω—è—Ç–∏–π. –ß–µ–∫–∞—î–º–æ 20 —Å–µ–∫...")
                    time.sleep(20)
                else:
                    print(f"\n‚ùå –Ü–Ω—à–∞ –ø–æ–º–∏–ª–∫–∞: {e}")
                    time.sleep(5)

    print(f"\nüéâ –ì–æ—Ç–æ–≤–æ! –î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ {OUTPUT_FILE}")

if __name__ == "__main__":
    main()